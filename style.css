/* style.css - Global styles for the Flix.id clone */

/* --- Root Variables --- */
:root {
    --bg-gradient-start: #a4b8c4;
    --bg-gradient-end: #8fa6b5;
    --glass-bg: rgba(255, 255, 255, 0.15);
    --glass-border: rgba(255, 255, 255, 0.25);
    --text-dark: #333;
    --text-light: #f0f0f0;
    --accent-blue: #1E4B8F;
    --accent-light-blue: #B3C9E9;
    --active-nav-bg: #2A2E33;
    --star-color: #FFC107;
    --border-radius-main: 15px;
    --border-radius-small: 10px;
    --font-family: 'Poppins', sans-serif;
    --blur-intensity: 10px;
    --hover-filter-bg: rgba(255, 255, 255, 0.4);
    --hover-filter-text: #000;
    --clear-btn-color: #e05d5d;
    --clear-btn-hover-color: #c84a4a;
    --comment-bg: rgba(255, 255, 255, 0.08);
    --comment-border: rgba(255, 255, 255, 0.15);
    --comment-text: #eee;
    --comment-time: #bbb;
    --avatar-border-color: #fff;
    --reply-indent-color: rgba(255, 255, 255, 0.2);

    /* Scrollbar Colors */
    --scrollbar-thumb: rgba(0, 0, 0, 0.3);
    --scrollbar-track: rgba(0, 0, 0, 0.1);
    --scrollbar-thumb-hover: rgba(0, 0, 0, 0.5);
}

* { margin: 0; padding: 0; box-sizing: border-box; }

/* Custom Scrollbar Styles */
::-webkit-scrollbar { width: 8px; height: 8px; }
::-webkit-scrollbar-track { background: var(--scrollbar-track); border-radius: 10px; }
::-webkit-scrollbar-thumb { background: var(--scrollbar-thumb); border-radius: 10px; transition: background 0.3s ease; }
::-webkit-scrollbar-thumb:hover { background: var(--scrollbar-thumb-hover); }
* { scrollbar-width: thin; scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-track); }

body {
    font-family: var(--font-family);
    background: linear-gradient(135deg, var(--bg-gradient-start), var(--bg-gradient-end));
    background-attachment: fixed;
    min-height: 100vh;
    display: flex;
    /* justify-content: center; */ /* Removed as content stacks vertically */
    align-items: flex-start; /* Align content to the top */
    padding: 0; /* Remove default body padding */
    color: var(--text-dark);
    line-height: 1.6;
    flex-direction: column; /* Stack content vertically */
}

/* Remove specific body padding/margin overrides */
body.index-page-body,
body.detail-page-body,
body.profile-page-body,
body.login-page-body {
    padding: 0; /* Ensure no body padding */
    margin: 0;  /* Ensure no body margin */
    display: flex;
    flex-direction: column;
    align-items: center; /* Center containers horizontally */
}


.main-container, .detail-page-container, .profile-page-container, .login-page-container {
    width: 100%;
    max-width: 1200px;
    background: var(--glass-bg);
    border: 1px solid var(--glass-border);
    border-radius: var(--border-radius-main);
    padding: 25px 35px;
    backdrop-filter: blur(var(--blur-intensity));
    -webkit-backdrop-filter: blur(var(--blur-intensity));
    box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.1);
    position: relative;
    color: var(--text-dark);
    /* Margin-top to push content below fixed header */
    margin-top: 100px;
    margin-bottom: 20px;
    box-sizing: border-box;
    flex-direction: column;
    display: flex;
}
.detail-page-container { color: var(--text-light); }
.login-page-container {
     margin-top: 80px; /* Keep smaller margin for login */
     min-height: 60vh;
     justify-content: center;
     align-items: center;
     /* Login page specific width */
     max-width: 500px;
     padding: 30px; /* Slightly more padding for login form */
}
.profile-page-container {
     /* Already has margin-top: 100px */
}


.loading-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.5);
    backdrop-filter: blur(5px);
    -webkit-backdrop-filter: blur(5px);
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 1000;
    opacity: 0;
    visibility: hidden;
    transition: opacity 0.3s ease, visibility 0.3s ease;
}
.loading-overlay.visible { opacity: 1; visibility: visible; }
.loading-spinner { border: 4px solid rgba(255, 255, 255, 0.3); border-top: 4px solid var(--text-light); border-radius: 50%; width: 40px; height: 40px; animation: spin 1s linear infinite; }
@keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

.app-header {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    background: rgba(255, 255, 255, 0.2);
    backdrop-filter: blur(var(--blur-intensity));
    -webkit-backdrop-filter: blur(var(--blur-intensity));
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 10px 35px;
    flex-wrap: wrap;
    gap: 15px;
    z-index: 100;
    box-sizing: border-box;
}
.logo {
    font-size: 1.8em;
    font-weight: 600;
    color: var(--text-dark);
    display: inline-block;
    cursor: pointer;
    /* --- MODIFICATION START --- */
    /* Removed animation styles */
    /* Removed span specific styles */
    /* --- MODIFICATION END --- */
}
/* --- MODIFICATION START --- */
/* Removed logo animation keyframes */
/*
.logo span { display: inline-block; }
.logo span.bounce { animation: letterBounce 0.5s ease-out; }
@keyframes letterBounce { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-8px); } }
*/
/* --- MODIFICATION END --- */

.main-nav { /* Default style for index page nav */ }
.main-nav ul { list-style: none; display: flex; background-color: var(--active-nav-bg); border-radius: var(--border-radius-small); padding: 5px; }
.main-nav li a { text-decoration: none; color: var(--text-light); padding: 8px 18px; border-radius: var(--border-radius-small); font-size: 0.95em; font-weight: 500; transition: background-color 0.3s ease; display: flex; align-items: center; cursor: pointer; }
.main-nav li a i { margin-right: 5px; }
.main-nav li a.type-active { background-color: rgba(255, 255, 255, 0.2); font-weight: 600; }
.main-nav li a:not(.type-active):hover { background-color: rgba(255, 255, 255, 0.1); }

.header-right { display: flex; align-items: center; gap: 20px; flex-wrap: wrap; justify-content: center;}

.search-container { position: relative; display: flex; align-items: center; margin-right: 15px; z-index: 20;}
.search-input {
     width: 0;
     padding: 8px 0;
     border: none;
     border-radius: var(--border-radius-small);
     background-color: rgba(255, 255, 255, 0.3);
     color: var(--text-dark);
     font-family: var(--font-family);
     font-size: 0.9em;
     opacity: 0;
     transition: width 0.4s ease, opacity 0.4s ease, padding 0.4s ease;
     margin-left: -10px;
     outline: none;
     padding-left: 35px;
     padding-right: 15px;
}
.search-container.active .search-input {
    width: 200px;
    opacity: 1;
    padding: 8px 15px 8px 35px;
    margin-left: 0;
}
.search-btn { background: transparent; color: var(--text-dark); border: none; padding: 10px; border-radius: 50%; cursor: pointer; font-size: 1.1em; transition: color 0.3s ease; position: absolute; left: 0px; z-index: 2; }
.search-container.active .search-btn { color: #555; }
#search-suggestions {
    position: absolute;
    top: calc(100% + 5px);
    left: 0;
    width: 100%;
    max-height: 200px;
    overflow-y: auto;
    background: rgba(255, 255, 255, 0.95);
    border: 1px solid rgba(0, 0, 0, 0.1);
    border-radius: var(--border-radius-small);
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
    z-index: 101;
    display: none;
    color: var(--text-dark);
    padding: 0;
}
#search-suggestions ul { list-style: none; padding: 0;}
#search-suggestions li { padding: 10px 15px; font-size: 0.9em; cursor: pointer; transition: background-color 0.2s ease; color: var(--text-dark);}
#search-suggestions li:hover { background-color: rgba(0, 0, 0, 0.05); }
#search-suggestions li strong { font-weight: 600; }

.notification-container { position: relative; z-index: 15;}
.notification-btn { background: none; border: none; color: var(--text-dark); font-size: 1.3em; cursor: pointer; position: relative; }
.notification-badge { position: absolute; top: -5px; right: -8px; background-color: red; color: white; font-size: 0.6em; font-weight: bold; width: 16px; height: 16px; border-radius: 50%; display: flex; justify-content: center; align-items: center; transition: opacity 0.3s ease; }
.notification-badge.hidden { opacity: 0; }
 .notification-panel {
    position: absolute;
    top: 140%;
    right: -10px;
    background: rgba(255, 255, 255, 0.9);
    backdrop-filter: blur(8px);
    border: 1px solid var(--glass-border);
    border-radius: var(--border-radius-small);
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
    width: 300px;
    max-height: 400px;
    overflow-y: auto;
    z-index: 50;
    opacity: 0;
    visibility: hidden;
    transform: translateY(-10px);
    transition: opacity 0.3s ease, visibility 0.3s ease, transform 0.3s ease;
    padding: 10px;
}
.notification-panel.show { opacity: 1; visibility: visible; transform: translateY(0); }
.notification-panel h4 { font-size: 1em; margin-bottom: 10px; color: #333; border-bottom: 1px solid rgba(0,0,0,0.1); padding-bottom: 8px;}
.notification-item { padding: 8px 5px; font-size: 0.85em; border-bottom: 1px solid rgba(0,0,0,0.05); cursor: pointer; transition: background-color 0.2s ease; }
.notification-item:last-child { border-bottom: none; }
.notification-item:hover { background-color: rgba(0, 0, 0, 0.03); }
.no-notifications { text-align: center; color: #777; padding: 20px 0; }

.user-profile { display: flex; align-items: center; gap: 10px; cursor: pointer; position: relative; padding: 5px; border-radius: var(--border-radius-small); transition: background-color 0.2s ease; z-index: 10;}
.user-profile:hover { background-color: rgba(255, 255, 255, 0.1); }
.avatar { width: 35px; height: 35px; border-radius: 50%; object-fit: cover; border: 2px solid var(--avatar-border-color); box-shadow: 0 0 5px rgba(0, 0, 0, 0.2); transition: border-color 0.3s ease, box-shadow 0.3s ease;}
.user-profile:hover .avatar { border-color: var(--accent-blue); }
.user-info { display: flex; flex-direction: column; line-height: 1.2; }
.user-name { font-weight: 600; font-size: 0.9em; color: var(--text-dark);}
.user-status { font-size: 0.8em; color: #1a599e; font-weight: 500; }
.user-profile i.fa-chevron-down { font-size: 0.8em; color: #666; transition: transform 0.3s ease; }
.user-profile.open i.fa-chevron-down { transform: rotate(180deg); }
.account-dropdown { position: absolute; top: 110%; right: 0; background: rgba(255, 255, 255, 0.9); backdrop-filter: blur(8px); border: 1px solid var(--glass-border); border-radius: var(--border-radius-small); box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1); width: 180px; z-index: 50; overflow: hidden; opacity: 0; visibility: hidden; transform: translateY(-10px); transition: opacity 0.3s ease, visibility 0.3s ease, transform 0.3s ease; }
.account-dropdown.show { opacity: 1; visibility: visible; transform: translateY(0); }
.account-dropdown ul { list-style: none; padding: 0;}
.account-dropdown li { width: 100%; }
.account-dropdown li a, .account-dropdown li button {
    display: flex;
    align-items: center;
    width: 100%;
    padding: 12px 15px;
    text-decoration: none;
    color: var(--text-dark);
    font-family: var(--font-family);
    font-size: 0.9em;
    background: none;
    border: none;
    cursor: pointer;
    transition: background-color 0.2s ease;
    text-align: left;
}
.account-dropdown li a i, .account-dropdown li button i { margin-right: 10px; width: 15px; text-align: center; opacity: 0.7; }
.account-dropdown li a span, .account-dropdown li button span { flex-grow: 1; }
.account-dropdown li a:hover, .account-dropdown li button:hover { background-color: rgba(0, 0, 0, 0.05); }
.account-dropdown li.divider { height: 1px; background-color: rgba(0, 0, 0, 0.1); margin: 5px 0; }

.language-selector {
    margin-left: 20px;
    z-index: 10;
}
.language-selector select {
    background: rgba(255, 255, 255, 0.2);
    border: 1px solid var(--glass-border);
    border-radius: 5px;
    padding: 5px 8px;
    font-family: var(--font-family);
    font-size: 0.85em;
    cursor: pointer;
    color: var(--text-dark);
    outline: none;
}


.promo-section { display: flex; gap: 20px; margin-bottom: 30px; flex-wrap: wrap;}
.promo-card { flex: 1; border-radius: var(--border-radius-main); overflow: hidden; position: relative; color: var(--text-light); min-height: 200px; display: flex; align-items: center; padding: 20px 30px; background-size: cover; background-position: center center; background-repeat: no-repeat; transition: background-image 1s ease-in-out; min-width: 300px; cursor: pointer;}
.promo-card .promo-content { z-index: 1; position: relative; max-width: 60%; opacity: 1; transition: opacity 0.5s ease-in-out; }
.promo-card.fading .promo-content { opacity: 0; }
.promo-card h2 { font-size: 1.8em; margin-bottom: 15px; font-weight: 600; line-height: 1.3; }
.play-button { background-color: rgba(0, 0, 0, 0.4); color: var(--text-light); border: none; padding: 8px 15px; border-radius: 20px; cursor: pointer; font-size: 0.9em; font-weight: 500; display: inline-flex; align-items: center; gap: 8px; transition: background-color 0.3s ease, transform 0.2s ease, filter 0.2s ease; text-decoration: none; }
.play-button:hover { background-color: rgba(0, 0, 0, 0.6); transform: scale(1.05); filter: brightness(1.1); }

.category-filters { display: flex; gap: 15px; margin-bottom: 20px; flex-wrap: wrap; justify-content: center; }
.filter-btn { background: var(--glass-bg); border: 1px solid var(--glass-border); border-radius: var(--border-radius-small); padding: 10px 18px; color: var(--text-dark); font-family: var(--font-family); font-size: 0.9em; font-weight: 500; cursor: pointer; display: inline-flex; align-items: center; gap: 8px; transition: background-color 0.3s ease, border-color 0.3s ease, color 0.3s ease, transform 0.2s ease; }
.filter-btn i { font-size: 1.1em; opacity: 0.8; transition: opacity 0.3s ease;}
.filter-btn span { /* Style the span inside filter buttons */ }
.filter-btn:hover { background-color: var(--hover-filter-bg); border-color: rgba(0, 0, 0, 0.1); color: var(--hover-filter-text); transform: translateY(-2px); }
.filter-btn.active { background-color: var(--active-nav-bg); border-color: var(--active-nav-bg); color: var(--text-light); font-weight: 600; cursor: default; transform: none; }
.filter-btn.active i { opacity: 1; }
.filter-btn.active:hover { background-color: var(--active-nav-bg); color: var(--text-light); }

.content-row { margin-bottom: 35px; padding-top: 20px;}
.row-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; flex-wrap: wrap; gap: 10px; }
.row-header h3 { font-size: 1.4em; font-weight: 600; margin-right: 15px; }
 #clear-watchlist-btn { background: transparent; border: none; color: var(--clear-btn-color); font-size: 1.1em; padding: 5px 8px; border-radius: 5px; cursor: pointer; transition: color 0.3s ease, background-color 0.3s ease; margin-left: auto; }
 #clear-watchlist-btn:hover:not(:disabled) { color: var(--clear-btn-hover-color); background-color: rgba(255, 0, 0, 0.05); }
 #clear-watchlist-btn:disabled { color: #aaa; cursor: not-allowed; background-color: transparent; }
.sort-controls { margin-left: 10px; }
.sort-controls label { font-size: 0.85em; margin-right: 5px; color: #444; }
.sort-controls select { background: rgba(255, 255, 255, 0.2); border: 1px solid var(--glass-border); border-radius: 5px; padding: 5px 8px; font-family: var(--font-family); font-size: 0.85em; cursor: pointer; color: var(--text-dark); }
.sort-controls select:focus { outline: none; border-color: rgba(0,0,0, 0.2); }

.row-content { display: flex; flex-wrap: wrap; gap: 20px; margin-bottom: -20px; justify-content: center; }
.movie-card {
    background: var(--glass-bg);
    border: 1px solid transparent;
    border-radius: var(--border-radius-small);
    overflow: hidden;
    width: 180px;
    transition: transform 0.3s ease, border-color 0.3s ease, box-shadow 0.3s ease;
    box-shadow: 0 2px 5px rgba(0,0,0, 0.1);
    position: relative;
    margin-bottom: 20px;
    cursor: pointer;
    display: block;
    text-decoration: none;
    color: var(--text-dark);
}
.movie-card:hover { transform: translateY(-5px) scale(1.03); border-color: var(--glass-border); box-shadow: 0 6px 15px rgba(0,0,0, 0.2); z-index: 10; }
.movie-card img { width: 100%; height: 270px; object-fit: cover; display: block; }
.watchlist-btn { position: absolute; top: 8px; right: 8px; background-color: rgba(0, 0, 0, 0.6); color: white; border: none; border-radius: 50%; width: 30px; height: 30px; font-size: 0.9em; display: flex; justify-content: center; align-items: center; cursor: pointer; opacity: 0; transition: opacity 0.3s ease, background-color 0.3s ease; z-index: 11; }
.movie-card:hover .watchlist-btn { opacity: 1; }
.watchlist-btn:hover { background-color: rgba(0, 0, 0, 0.8); }
.watchlist-btn.added { background-color: var(--star-color); color: var(--text-dark); }
.watchlist-btn.added:hover { background-color: #e6ac00; }
.card-info { padding: 10px 12px; }
.card-info h4 { font-size: 1em; font-weight: 600; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; margin-bottom: 5px; color: var(--text-dark);}
.metadata { display: flex; justify-content: space-between; align-items: center; font-size: 0.8em; color: #555; }
.metadata span { display: inline-flex; align-items: center; gap: 4px; }
.metadata i.fa-star, .metadata i.fa-star-half-alt { color: var(--star-color); font-size: 0.9em; }

#interesting-movies-row { padding-top: 20px;}
#interesting-movies-row .movie-card { width: 240px; margin-bottom: 20px; }
#interesting-movies-row .movie-card img { height: 135px; }

.detail-page-container {
    color: var(--text-light);
    position: relative;
    overflow: hidden;
    padding-top: 20px;
}

.detail-backdrop {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-size: cover;
    background-position: center center;
    filter: brightness(0.3);
    z-index: -1;
    border-radius: var(--border-radius-main);
}

.back-button {
    position: absolute;
    top: 20px;
    left: 20px;
    background: rgba(255, 255, 255, 0.2);
    color: var(--text-light);
    border: none;
    border-radius: 50%;
    width: 40px;
    height: 40px;
    font-size: 1.2em;
    cursor: pointer;
    display: flex;
    justify-content: center;
    align-items: center;
    transition: background-color 0.3s ease;
    z-index: 10;
}
.back-button:hover { background-color: rgba(255, 255, 255, 0.3); }


.detail-main-content {
    display: flex;
    gap: 40px;
    margin-top: 20px;
    flex-wrap: wrap;
}

.detail-poster {
    flex-shrink: 0;
    width: 300px;
    border-radius: var(--border-radius-small);
    overflow: hidden;
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
}
.detail-poster img {
    display: block;
    width: 100%;
    height: auto;
}

.detail-info {
    flex-grow: 1;
}

.detail-info h1 {
    font-size: 2.5em;
    font-weight: 700;
    margin-bottom: 10px;
    color: var(--text-light);
}

.detail-meta {
    font-size: 1em;
    color: rgba(240, 240, 240, 0.8);
    margin-bottom: 20px;
    display: flex;
    align-items: center;
    flex-wrap: wrap;
    gap: 15px;
}
.detail-meta span {
    display: flex;
    align-items: center;
    gap: 5px;
}
.detail-meta i.fa-star, .detail-meta i.fa-star-half-alt {
     color: var(--star-color);
     font-size: 1em;
}

.detail-actions {
    display: flex;
    align-items: center;
    gap: 15px;
    margin-bottom: 30px;
    flex-wrap: wrap;
}

.detail-watchlist-btn {
    position: static;
    opacity: 1;
    width: 45px;
    height: 45px;
    font-size: 1.1em;
    background-color: rgba(255, 255, 255, 0.1);
    border: 1px solid var(--glass-border);
    color: var(--text-light);
    border-radius: 50%;
    transition: background-color 0.3s ease, color 0.3s ease;
    display: flex;
    justify-content: center;
    align-items: center;
}
.detail-watchlist-btn:hover { background-color: rgba(255, 255, 255, 0.2); }
.detail-watchlist-btn.added { background-color: var(--star-color); color: var(--text-dark); }
.detail-watchlist-btn.added:hover { background-color: #e6ac00; }


.player-section { margin-bottom: 30px; }
.player-placeholder {
     background: rgba(0, 0, 0, 0.5);
     aspect-ratio: 16 / 9;
     border-radius: var(--border-radius-small);
     display: flex;
     justify-content: center;
     align-items: center;
     cursor: pointer;
     transition: background-color 0.3s ease;
     overflow: hidden;
}
.player-placeholder:hover { background: rgba(0, 0, 0, 0.7); }
.player-placeholder i {
    font-size: 4em;
    color: rgba(255, 255, 255, 0.5);
    transition: color 0.3s ease, transform 0.3s ease;
}
.player-placeholder:hover i { color: rgba(255, 255, 255, 0.8); transform: scale(1.1); }

.player-placeholder iframe {
     width: 100%;
     height: 100%;
     border: none;
}


.trailers-section h4 {
    font-size: 1.2em;
    font-weight: 600;
    margin-bottom: 15px;
    color: var(--text-light);
}

.trailers-container {
    display: flex;
    gap: 15px;
    flex-wrap: wrap;
}

.trailer-item {
    background: rgba(0, 0, 0, 0.3);
    padding: 10px 15px;
    border-radius: var(--border-radius-small);
    font-size: 0.9em;
    cursor: pointer;
    transition: background-color 0.3s ease;
    color: rgba(240, 240, 240, 0.9);
    display: inline-flex;
    align-items: center;
    gap: 8px;
}
.trailer-item i { opacity: 0.8;}
.trailer-item:hover { background: rgba(0, 0, 0, 0.5); }


.rating-section {
    margin-top: 30px;
    padding-top: 20px;
    border-top: 1px solid var(--glass-border);
}

.rating-section h4 {
    font-size: 1.2em;
    font-weight: 600;
    margin-bottom: 15px;
    color: var(--text-light);
}

.user-rating {
    display: flex;
    align-items: center;
    gap: 10px;
    margin-bottom: 15px;
    flex-wrap: wrap;
    gap: 5px;
}

.user-rating label {
    font-size: 1em;
    color: rgba(240, 240, 240, 0.9);
}

.rating-stars {
    display: inline-block;
    font-size: 1.2em;
    color: rgba(255, 255, 255, 0.4);
    white-space: nowrap;
}

.rating-stars .star {
    cursor: pointer;
    transition: color 0.2s ease;
    margin: 0 1px;
    display: inline-block;
}
.rating-stars .star i {
    pointer-events: none;
}
.rating-stars .star.rated-visual i.fas { /* Use rated-visual for JS application */
     color: var(--star-color);
}
/* Apply hover effect on container */
.rating-stars:not(.rated-container) .star:hover i.far {
     color: var(--star-color);
}
.rating-stars:not(.rated-container) .star:hover ~ .star i.far:not(.rated-visual) {
    color: rgba(255, 255, 255, 0.4);
}
/* Hover effect when already rated */
.rating-stars.rated-container .star:hover i.far {
     color: var(--star-color);
}
.rating-stars.rated-container .star.rated-visual ~ .star i.far {
     color: rgba(255, 255, 255, 0.4);
}


.user-rated-value {
    font-size: 0.9em;
    color: var(--star-color);
    min-width: 60px;
}


.comments-section {
    margin-top: 30px;
    padding-top: 20px;
    border-top: 1px solid var(--glass-border);
}

.comments-section h4 {
    font-size: 1.2em;
    font-weight: 600;
    margin-bottom: 15px;
    color: var(--text-light);
}

.comment-form {
    margin-bottom: 25px;
    display: flex;
    gap: 15px;
    align-items: stretch;
}

.comment-input-container {
    flex-grow: 1;
    position: relative;
    display: flex;
    flex-direction: column;
    gap: 5px;
}
.comment-textarea-wrapper {
     position: relative;
     display: flex;
     align-items: flex-end;
     width: 100%; /* Ensure wrapper takes full width */
}
.comment-input-container textarea {
    flex-grow: 1;
    padding: 10px 15px;
    padding-right: 35px;
    border-radius: var(--border-radius-small);
    border: 1px solid var(--glass-border);
    background: rgba(255, 255, 255, 0.1);
    color: var(--text-light);
    font-family: var(--font-family);
    font-size: 0.9em;
    resize: vertical;
    min-height: 80px;
    outline: none;
    width: 100%; /* Ensure textarea takes full width within wrapper */
}
.comment-input-container textarea::placeholder { color: rgba(240, 240, 240, 0.6);}
.comment-input-container textarea:focus { border-color: rgba(255, 255, 255, 0.4);}

.emoji-button {
     position: absolute;
     right: 8px;
     bottom: 8px;
     background: none;
     border: none;
     font-size: 1.2em;
     cursor: pointer;
     color: rgba(240, 240, 240, 0.8);
     transition: color 0.2s ease;
     z-index: 2;
     line-height: 1; /* Prevent extra space below emoji */
     padding: 0; /* Remove default button padding */
}
.emoji-button:hover { color: var(--text-light); }

.emoji-picker-dropdown {
    position: absolute;
    /* Dynamic top/bottom/left/right will be set by JS */
    background: rgba(255, 255, 255, 0.95);
    border: 1px solid rgba(0,0,0,0.1);
    border-radius: var(--border-radius-small);
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
    padding: 10px;
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(25px, 1fr));
    gap: 5px;
    max-width: 250px; /* Increased max width for more emojis */
    max-height: 200px; /* Added max height for scrolling */
    overflow-y: auto; /* Added scroll for many emojis */
    z-index: 3;
    display: none; /* Hidden by default */
    color: var(--text-dark);
    /* Ensure it doesn't overflow the modal */
    /* This might require more complex positioning or ensuring modal has overflow: hidden */
    /* For now, rely on JS positioning and viewport bounds */
}
.emoji-picker-dropdown span {
    cursor: pointer;
    font-size: 1.2em;
    text-align: center;
}


.comment-form button:not(#cancel-reply-btn) { /* Exclude cancel button */
    background: var(--accent-blue);
    color: var(--text-light);
    border: none;
    border-radius: var(--border-radius-small);
    padding: 10px 20px;
    font-size: 1em;
    font-weight: 500;
    cursor: pointer;
    transition: background-color 0.3s ease;
     min-width: 100px;
     flex-shrink: 0; /* Prevent button from shrinking */
}
.comment-form button:not(#cancel-reply-btn):hover { background-color: #1a4079; }

.comments-list {
    list-style: none;
    padding: 0;
}

.comment-item {
    background: var(--comment-bg);
    border: 1px solid var(--comment-border);
    border-radius: var(--border-radius-small);
    padding: 12px 15px;
    margin-bottom: 15px;
    color: var(--comment-text);
    position: relative;
    padding-right: 80px; /* Space for reply button */
}
/* Remove right padding for nested replies if needed, or adjust based on depth */
.comment-item.reply {
    padding-right: 15px; /* Replies don't have a reply button */
}


.comment-item strong {
    display: block;
    font-weight: 600;
    margin-bottom: 5px;
    color: rgba(240, 240, 240, 0.9);
}

.comment-item p {
    font-size: 0.9em;
    margin-bottom: 5px;
    word-wrap: break-word;
    overflow-wrap: break-word;
}

.comment-item .comment-time {
    display: block;
    font-size: 0.8em;
    color: var(--comment-time);
    /* text-align: right; /* Removed, reply button position handles spacing */
    margin-top: 3px;
}
.comment-item .reply-button {
    position: absolute;
    bottom: 10px;
    right: 15px;
    background: rgba(255, 255, 255, 0.1);
    color: var(--comment-text);
    border: none;
    border-radius: var(--border-radius-small);
    padding: 4px 8px;
    font-size: 0.8em;
    cursor: pointer;
    transition: background-color 0.2s ease;
    z-index: 1; /* Ensure reply button is clickable */
}
.comment-item .reply-button:hover { background: rgba(255, 255, 255, 0.2); }

/* Style for replies (indented) */
.comments-list .comment-item.reply {
    margin-left: 30px;
    border-left: 3px solid var(--reply-indent-color);
    padding-left: 15px;
    background: rgba(255, 255, 255, 0.05);
}
.comments-list .comment-item.reply > ul.comments-list > .comment-item.reply {
    margin-left: 20px;
    border-left-color: rgba(255, 255, 255, 0.1);
    background: rgba(255, 255, 255, 0.03);
}
/* Remove reply button from nested replies */
.comments-list .comment-item.reply .reply-button {
     display: none;
}


/* Style for the cancel reply button */
#cancel-reply-btn {
    background: rgba(255, 255, 255, 0.1);
    color: var(--text-light);
    border: none;
    border-radius: var(--border-radius-small);
    padding: 5px 10px;
    font-size: 0.85em;
    cursor: pointer;
    transition: background-color 0.2s ease;
    margin-top: 5px;
    width: auto;
    align-self: flex-end;
    display: none; /* Hidden by default */
}
#cancel-reply-btn:hover {
    background: rgba(255, 255, 255, 0.2);
}
/* Show cancel button when replying */
.comment-form #cancel-reply-btn.visible { display: block; }


.no-comments {
    text-align: center;
    color: rgba(240, 240, 240, 0.7);
    padding: 20px 0;
    font-size: 0.9em;
}

/* --- Profile Edit Modal --- */
.modal-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.5);
    backdrop-filter: blur(5px);
    -webkit-backdrop-filter: blur(5px);
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 200;
    opacity: 0;
    visibility: hidden;
    transition: opacity 0.3s ease, visibility 0.3s ease;
}
.modal-overlay.visible {
    opacity: 1;
    visibility: visible;
}
.modal-content {
    background: rgba(255, 255, 255, 0.98);
    border: 1px solid var(--glass-border);
    border-radius: var(--border-radius-main);
    padding: 30px;
    backdrop-filter: none;
    -webkit-backdrop-filter: none;
    box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.1);
    width: 90%;
    max-width: 500px;
    color: var(--text-dark);
    position: relative;
    transform: translateY(-20px);
    transition: transform 0.3s ease;
    max-height: 95vh;
    overflow-y: auto;
}
.modal-overlay.visible .modal-content {
    transform: translateY(0);
}
.modal-content h4 {
    font-size: 1.5em;
    margin-bottom: 20px;
    font-weight: 600;
    color: var(--text-dark);
}
.modal-content label {
    display: block;
    margin-bottom: 8px;
    font-weight: 500;
}
.modal-content input[type="text"],
.modal-content input[type="url"] {
    width: 100%;
    padding: 10px;
    margin-bottom: 20px;
    border: 1px solid var(--glass-border);
    border-radius: var(--border-radius-small);
    background: rgba(255, 255, 255, 0.3);
    color: var(--text-dark);
    font-family: var(--font-family);
    font-size: 1em;
    outline: none;
}
.modal-content input[type="text"]:focus,
.modal-content input[type="url"]:focus {
     border-color: rgba(0, 0, 0, 0.2);
}
.avatar-upload-section {
    margin-bottom: 20px;
    display: flex;
    flex-direction: column;
    align-items: center;
    padding-bottom: 20px;
    border-bottom: 1px solid rgba(0,0,0,0.1);
}
.avatar-preview {
    width: 80px;
    height: 80px;
    border-radius: 50%;
    object-fit: cover;
    border: 3px solid var(--accent-blue);
    margin-bottom: 15px;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
}
.upload-button-wrapper {
    position: relative;
    overflow: hidden;
    display: inline-flex; /* Changed to flex */
    align-items: center; /* Center content vertically */
    background: rgba(0, 0, 0, 0.1);
    color: var(--text-dark);
    padding: 8px 15px;
    border-radius: var(--border-radius-small);
    cursor: pointer;
    transition: background-color 0.3s ease;
    font-size: 0.9em;
    font-weight: 500;
    gap: 5px; /* Added gap */
}
.upload-button-wrapper i { margin-right: 0; } /* Removed margin */
.upload-button-wrapper:hover { background: rgba(0, 0, 0, 0.2); }
.upload-button-wrapper input[type="file"] {
    position: absolute;
    left: 0;
    top: 0;
    opacity: 0;
    cursor: pointer;
    height: 100%;
    width: 100%;
}
.recommended-avatars {
    margin-top: 20px;
    border-top: 1px solid rgba(0,0,0,0.1);
    padding-top: 15px;
}
.recommended-avatars h5 {
    font-size: 1em;
    margin-bottom: 10px;
    color: #555;
}
.recommended-avatars-list {
    display: flex;
    gap: 10px;
    flex-wrap: wrap;
    justify-content: center;
    max-height: 100px; /* Limit height */
    overflow-y: auto; /* Add scroll */
}
.recommended-avatars-list img {
    width: 50px;
    height: 50px;
    border-radius: 50%;
    object-fit: cover;
    border: 2px solid rgba(0,0,0,0.1);
    cursor: pointer;
    transition: border-color 0.2s ease, transform 0.2s ease;
}
.recommended-avatars-list img:hover {
    border-color: var(--accent-blue);
    transform: scale(1.1);
}
.modal-actions {
    display: flex;
    justify-content: flex-end;
    gap: 10px;
    margin-top: 20px;
}
.modal-actions button {
    padding: 10px 20px;
    border: none;
    border-radius: var(--border-radius-small);
    cursor: pointer;
    font-size: 1em;
    font-weight: 500;
    transition: background-color 0.3s ease;
}
.modal-actions .save-btn {
    background: var(--accent-blue);
    color: var(--text-light);
}
.modal-actions .save-btn:hover {
    background: #1a4079;
}
.modal-actions .cancel-btn {
    background: rgba(0, 0, 0, 0.1);
    color: var(--text-dark);
}
.modal-actions .cancel-btn:hover {
    background: rgba(0, 0, 0, 0.2);
}

.profile-page-container {
    color: var(--text-dark);
    padding-top: 20px;
}
.profile-header {
    display: flex;
    align-items: center;
    gap: 20px;
    margin-bottom: 30px;
    padding-bottom: 20px;
    border-bottom: 1px solid rgba(0,0,0,0.1);
    flex-wrap: wrap;
}
.profile-header img {
    width: 80px;
    height: 80px;
    border-radius: 50%;
    object-fit: cover;
    border: 3px solid var(--accent-blue);
    box-shadow: 0 4px 10px rgba(0,0,0,0.1);
}
.profile-info h2 {
    font-size: 2em;
    margin-bottom: 5px;
    color: var(--text-dark);
}
.profile-info p {
    font-size: 1em;
    color: #555;
}
.profile-section {
    margin-bottom: 30px;
}
.profile-section h3 {
    font-size: 1.5em;
    font-weight: 600;
    margin-bottom: 15px;
    color: var(--text-dark);
    border-bottom: 1px solid rgba(0,0,0,0.1);
    padding-bottom: 5px;
}
.history-list, .profile-comments-list, .profile-ratings-list {
    list-style: none;
    padding: 0;
}
.history-item, .profile-comment-item, .profile-rating-item {
    background: rgba(0, 0, 0, 0.05);
    border: 1px solid rgba(0,0,0,0.1);
    border-radius: var(--border-radius-small);
    padding: 10px 15px;
    margin-bottom: 10px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-size: 0.9em;
    color: #444;
    transition: background-color 0.2s ease;
}
.history-item:hover, .profile-comment-item:hover, .profile-rating-item:hover { background: rgba(0, 0, 0, 0.08); }

.history-item a, .profile-comment-item a, .profile-rating-item a {
     text-decoration: none;
     color: inherit;
     display: flex;
     justify-content: space-between;
     align-items: center;
     width: 100%;
     flex-wrap: wrap;
     gap: 5px;
}
.history-item a span:first-child,
.profile-comment-item a span:first-child,
.profile-rating-item a span:first-child
{
    font-weight: 600;
    color: var(--text-dark);
    flex-basis: 60%;
    word-break: break-word;
}
.history-item a span:last-child,
.profile-comment-item .comment-preview,
.profile-rating-item .rating-display
{
    font-size: 0.85em;
    color: #777;
    flex-basis: 35%;
    text-align: right;
    display: flex;
    align-items: center;
    justify-content: flex-end;
    gap: 4px;
}

.profile-comment-item .comment-preview {
    font-style: italic;
    color: #666;
    flex-basis: 100%;
    text-align: left;
    margin-top: 5px;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}
.profile-rating-item .rating-display .fa-star, .profile-rating-item .rating-display .fa-star-half-alt {
    color: var(--star-color);
    font-size: 1em;
}


.no-history, .no-comments-profile, .no-ratings-profile {
    text-align: center;
    color: #777;
    padding: 20px 0;
    font-size: 0.9em;
}

.login-page-container {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    min-height: 60vh;
    max-width: 500px;
    margin: 80px auto;
    color: var(--text-dark);
}
.login-page-container .logo { /* Adjusted for login page specific logo size */
     font-size: 2.5em;
     margin-bottom: 30px;
}
.login-page-container h1 {
    font-size: 2em;
    margin-bottom: 20px;
    color: var(--text-dark);
    text-align: center;
}
.login-form {
    width: 100%;
    display: flex;
    flex-direction: column;
    gap: 15px;
}
.login-form label {
    font-weight: 500;
    color: #444;
}
.login-form input {
    width: 100%;
    padding: 10px 15px;
    border: 1px solid var(--glass-border);
    border-radius: var(--border-radius-small);
    background: rgba(255, 255, 255, 0.3);
    color: var(--text-dark);
    font-family: var(--font-family);
    font-size: 1em;
    outline: none;
}
.login-form input:focus { border-color: rgba(0,0,0,0.2); }
.login-form button {
    background: var(--accent-blue);
    color: var(--text-light);
    border: none;
    border-radius: var(--border-radius-small);
    padding: 12px 20px;
    font-size: 1.1em;
    font-weight: 600;
    cursor: pointer;
    transition: background-color 0.3s ease;
    margin-top: 10px;
}
.login-form button:hover { background-color: #1a4079; }
#login-message {
    color: red;
    font-size: 0.9em;
    text-align: center;
    margin-top: 10px;
}

@media (max-width: 992px) {
    .movie-card { width: 160px; }
    .movie-card img { height: 240px; }
    .header-right { gap: 15px; }
    .search-container { margin-right: 10px;}
    .detail-main-content { flex-direction: column; gap: 20px; }
    .detail-poster { width: 250px; margin: 0 auto; }
}
@media (max-width: 768px) {
    body { padding: 0 10px;} /* Add back some side padding */
    .main-container, .detail-page-container, .profile-page-container, .login-page-container { padding: 20px;}
    .app-header { padding: 10px 20px; }
    .header-right { margin-top: 15px; width: 100%; justify-content: space-between; gap: 10px; }
    .search-container { margin-right: 0; flex-grow: 1; }
    .search-container.active .search-input { width: 100%; }
    .search-btn { left: 10px;}
    /* Containers already have margin-top set, adjust if needed */
    /* .main-container, .detail-page-container, .profile-page-container { margin-top: 80px;} */


    .movie-card { width: 140px; }
    .movie-card img { height: 210px; }
    .row-content { gap: 15px; margin-bottom: -15px; justify-content: center; } /* Changed to center for potentially odd numbers */
    .category-filters { justify-content: flex-start; gap: 10px; }
    .filter-btn { padding: 8px 12px; font-size: 0.85em;}
    .row-header { justify-content: flex-start; gap: 15px; }
    .row-header h3 { font-size: 1.2em;}
    #clear-watchlist-btn { margin-left: auto; font-size: 1em; }
    .sort-controls { margin-left: 0; width: auto; }
    .sort-controls select { font-size: 0.8em; padding: 3px 5px;}
    .promo-section { flex-direction: column; gap: 15px;}
    .promo-card { min-width: unset; width: 100%; padding: 15px 20px;}
    .promo-card h2 { font-size: 1.5em; margin-bottom: 10px;}
    .detail-page-container { padding: 15px; }
    .detail-info h1 { font-size: 1.8em; }
    .detail-meta { font-size: 0.9em; gap: 10px;}
    .detail-actions { flex-wrap: wrap;}
    .detail-watchlist-btn { width: 40px; height: 40px; font-size: 1em;}
    #detail-description { font-size: 0.9em;}
    .comment-form { flex-direction: column; gap: 10px; align-items: stretch;}
    .comment-input-container { flex-direction: column;}
    .comment-textarea-wrapper textarea { padding-right: 15px;}
     /* Emoji button positioning needs adjustment in JS for small screens */
     /* .emoji-button { position: static; align-self: flex-end; margin-right: 0;} */
     /* .emoji-picker-dropdown { bottom: unset; top: 100%; right: 0;} */
    .comment-form button:not(#cancel-reply-btn) { align-self: flex-end; padding: 8px 15px; min-width: unset;}
    .profile-header { flex-direction: column; text-align: center; }
    .profile-info h2 { font-size: 1.8em;}
    .profile-info p { font-size: 0.9em;}
    .history-item a, .profile-comment-item a, .profile-rating-item a { flex-direction: column; align-items: flex-start; gap: 5px;}
    .history-item a span:first-child,
    .profile-comment-item a span:first-child,
    .profile-rating-item a span:first-child
    { width: 100%; flex-basis: auto;}
    .history-item a span:last-child,
    .profile-rating-item .rating-display
    { font-size: 0.8em; color: #777; text-align: left; flex-basis: auto; justify-content: flex-start;}
    .profile-comment-item .comment-preview { flex-basis: 100%; text-align: left; margin-top: 5px; }

    .comments-list .comment-item.reply { margin-left: 15px; padding-left: 10px; }
    .comments-list .comment-item.reply > ul.comments-list > .comment-item.reply { margin-left: 10px; padding-left: 8px; }
}
@media (max-width: 480px) {
    body { padding: 0 5px; } /* Even less side padding */
    .app-header { padding: 10px 5px; }
    .header-right { flex-direction: column; align-items: flex-end; gap: 10px; }
    .search-container.active .search-input { width: calc(100vw - 20px); padding: 8px 10px 8px 35px;}
    .search-suggestions { width: calc(100vw - 20px); left: 5px; }
    .user-profile { align-self: flex-start; }
    .account-dropdown { right: auto; left: 0;}
    .notification-container { align-self: flex-start; }
    .notification-panel { right: auto; left: -5px; width: calc(100vw - 10px);}
    /* Containers already have margin-top set, adjust if needed */
    /* .main-container, .detail-page-container, .profile-page-container { margin-top: 80px; padding: 10px;} */


    .movie-card { width: calc(50% - 8px); margin-bottom: 15px;}
    .row-content { gap: 15px; justify-content: space-between; margin-bottom: -15px;}
    #interesting-movies-row .movie-card { width: 100%; }
    .row-header h3 { margin-right: 0; }
    .sort-controls label { display: none; }
    .filter-btn { padding: 6px 10px; font-size: 0.8em;}
    .detail-poster { width: 100%; }
    .detail-info h1 { font-size: 1.8em; }
    .detail-meta { font-size: 0.85em; }
    .detail-actions { flex-wrap: wrap;}
    .detail-watchlist-btn { width: 35px; height: 35px; font-size: 0.9em;}
    .comment-form button:not(#cancel-reply-btn) { width: 100%; text-align: center; }
    .modal-content { padding: 20px;}
    .modal-content h4 { font-size: 1.3em;}
    .modal-actions { justify-content: center; }
    .history-item a span:first-child, .profile-comment-item a span:first-child, .profile-rating-item a span:first-child { flex-basis: 100%;}
     .history-item a span:last-child, .profile-rating-item .rating-display { flex-basis: 100%; text-align: left; margin-top: 0;}
     .profile-comment-item .comment-preview { flex-basis: 100%;}
}
