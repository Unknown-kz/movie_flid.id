<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title id="detail-page-title" data-lang-key="detail_page_title">Flix.id - Movie Detail</title>
    <!-- Font Awesome for Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Google Fonts (Poppins) -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <!-- Link to external CSS file -->
    <link rel="stylesheet" href="style.css">
    <style>
        /* Specific styles for detail page - mostly handled by .detail-page-container */
        /* Ensure body has no extra padding */
         body.detail-page-body {
             padding: 0;
             margin: 0;
             display: flex;
             flex-direction: column;
             align-items: center;
         }
         .detail-page-container {
              /* Already has margin-top: 100px */
         }
         /* Adjustments for emoji picker positioning relative to the modal */
         #profile-edit-modal-detail .emoji-picker-dropdown {
             /* Override potential positioning from main page style */
             position: absolute !important; /* Ensure it's absolute within the modal content if needed */
             /* top: auto !important; */ /* Let JS position it */
             /* bottom: auto !important; */
             /* left: auto !important; */
             /* right: auto !important; */
             background: rgba(255, 255, 255, 0.98) !important; /* Match modal background */
             border-color: rgba(0,0,0,0.2) !important; /* Match modal borders */
         }
    </style>
</head>
<body class="detail-page-body">
    <!-- Header -->
    <header class="app-header">
         <div class="logo" id="app-logo-detail">Flix.id</div>
         <div class="header-right">
              <!-- Search is not needed on detail page -->
              <!-- <div class="search-container">...</div> -->
              <!-- Notifications with Panel -->
              <div class="notification-container">
                  <button class="notification-btn" id="notification-btn-detail" data-lang-key="notifications_title" title="Notifications">
                      <i class="fas fa-bell"></i>
                      <span class="notification-badge" id="notification-badge-detail">0</span>
                  </button>
                  <div id="notification-panel-detail" class="notification-panel">
                      <h4 data-lang-key="notifications_title">Notifications</h4>
                      <div id="notifications-list-detail"></div>
                      <div class="no-notifications" id="no-notifications-message-detail" data-lang-key="no_notifications">No new notifications</div>
                  </div>
              </div>
               <!-- Language Selector -->
               <div class="language-selector" data-lang-key="language_select_title_detail" title="Language Select">
                   <select id="language-select-detail">
                       <option value="en">English</option>
                       <option value="ru">–†—É—Å—Å–∫–∏–π</option>
                       <option value="kk">“ö–∞–∑–∞“õ—à–∞</option>
                   </select>
               </div>
              <!-- User Profile -->
              <div class="user-profile" id="user-profile-toggle-detail">
                  <img src="https://i.pravatar.cc/40?img=1" alt="User Avatar" class="avatar" id="user-avatar-detail">
                  <div class="user-info"> <span class="user-name" id="user-name-detail">Guest</span> <span class="user-status" id="user-status-detail">Free</span> </div>
                  <i class="fas fa-chevron-down"></i>
                  <div class="account-dropdown" id="account-dropdown-detail">
                      <ul>
                          <li><a href="profile.html"><i class="fas fa-user-circle"></i> <span data-lang-key="profile_link">Profile</span></a></li>
                          <li><button id="edit-profile-btn-detail"><i class="fas fa-edit"></i> <span data-lang-key="edit_profile_btn">Edit Profile</span></button></li>
                          <li><a><i class="fas fa-cog"></i> <span data-lang-key="settings_link">Settings</span></a></li>
                          <li><a><i class="fas fa-question-circle"></i> <span data-lang-key="help_link">Help Center</span></a></li>
                          <li class="divider"></li>
                          <li><button id="logout-btn-detail"><i class="fas fa-sign-out-alt"></i> <span data-lang-key="logout_btn">Logout</span></button></li>
                      </ul>
                  </div>
              </div>
         </div>
     </header>
     <!-- End Header -->


    <div class="detail-page-container">
        <!-- Loading -->
        <div class="loading-overlay" id="loading-overlay"> <div class="loading-spinner"></div> </div>

        <!-- Backdrop for effect -->
        <div class="detail-backdrop" id="detail-backdrop"></div>

        <!-- Back Button -->
        <button class="back-button" onclick="window.history.back()" data-lang-key="back_button_title" title="Back"> <i class="fas fa-arrow-left"></i> </button>

        <!-- Detail Content -->
        <div class="detail-main-content">
            <div class="detail-poster">
                <img src="" alt="Movie Poster" id="detail-poster-img">
            </div>
            <div class="detail-info">
                <h1 id="detail-title">Loading Title...</h1>
                 <div class="detail-meta">
                     <span id="detail-year">Year</span> |
                     <span id="detail-genre">Genre</span> |
                     <span id="detail-rating"><i class="fas fa-star"></i> Loading...</span>
                 </div>

                 <!-- Player Section -->
                 <div class="player-section">
                     <div class="player-placeholder" id="player-placeholder">
                          <i class="fas fa-play-circle"></i>
                          <!-- The iframe will be inserted here when playing -->
                     </div>
                 </div>

                <div class="detail-actions">
                    <!-- Watchlist Button -->
                    <button class="watchlist-btn detail-watchlist-btn" id="detail-watchlist-btn" data-movie-id="">
                         <i class="fas fa-plus"></i>
                         <!-- Title attribute will be set by JS for translation -->
                    </button>
                     <!-- Removed Play Button - PlayerPlaceholder handles it -->
                    <!-- <a href="#" class="play-button"><i class="fas fa-play"></i> <span data-lang-key="play_button">Play</span></a> -->
                </div>
                <p id="detail-description">Loading description...</p>

                <section class="rating-section">
                     <h4 id="rating-title" data-lang-key="rating_title">Your Rating</h4>
                     <div class="user-rating">
                         <label id="rate-this-label" data-lang-key="rate_this_label">Rate this:</label>
                         <div class="rating-stars" id="user-rating-stars">
                             <!-- Stars populated by JS -->
                             <span class="star" data-value="2"><i class="far fa-star"></i></span>
                             <span class="star" data-value="4"><i class="far fa-star"></i></span>
                             <span class="star" data-value="6"><i class="far fa-star"></i></span>
                             <span class="star" data-value="8"><i class="far fa-star"></i></span>
                             <span class="star" data-value="10"><i class="far fa-star"></i></span>
                         </div>
                         <span id="user-rated-value" style="font-size:0.9em; color:var(--star-color);"></span>
                     </div>
                 </section>

                <section class="trailers-section">
                    <h4 id="trailers-title" data-lang-key="trailers_title">Trailers & More</h4>
                    <div class="trailers-container" id="trailers-container">
                        <!-- Trailer items will be populated here -->
                        <div style="color: rgba(240, 240, 240, 0.8); font-size: 0.9em;">Loading trailers...</div>
                    </div>
                </section>

            </div>
        </div>

        <!-- Comments Section -->
        <section class="comments-section">
            <h4 id="comments-title" data-lang-key="comments_title">Comments</h4>
            <div class="comment-form">
                <div class="comment-input-container">
                    <div class="comment-textarea-wrapper">
                        <textarea id="comment-input" data-lang-key="comment_placeholder" placeholder="Add a comment..." rows="3"></textarea>
                        <button class="emoji-button" id="emoji-button" title="Add Emoji">üòä</button>
                        <div id="emoji-picker" class="emoji-picker-dropdown">
                             <!-- Emojis populate here -->
                        </div>
                    </div>
                     <!-- Hidden input to store parent comment ID for replies -->
                     <input type="hidden" id="parent-comment-id" value="">
                     <!-- Cancel Reply Button -->
                     <button id="cancel-reply-btn" class="cancel-btn" data-lang-key="modal_cancel">Cancel Reply</button>
                </div>
                <button id="post-comment-btn" data-lang-key="post_comment_btn">Post Comment</button>
            </div>
            <ul class="comments-list" id="comments-list">
                <!-- Comments will be populated here -->
            </ul>
             <div class="no-comments" id="no-comments-message" data-lang-key="no_comments">No comments yet.</div>
        </section>

    </div><!-- End Detail Page Container -->

    <!-- Profile Edit Modal (Duplicated for detail page) -->
    <div id="profile-edit-modal-detail" class="modal-overlay">
        <div class="modal-content">
            <h4 data-lang-key="modal_edit_profile_title">Edit Profile</h4>
            <div class="avatar-upload-section">
                 <img src="" alt="Avatar Preview" class="avatar-preview" id="avatar-preview-detail">
                 <div class="upload-button-wrapper">
                     <i class="fas fa-upload"></i> <span data-lang-key="modal_upload_avatar">Upload New Avatar</span>
                     <input type="file" id="avatar-upload-input-detail" accept="image/*">
                 </div>
             </div>
            <label for="edit-name-detail" data-lang-key="modal_nickname_label">Nickname:</label>
            <input type="text" id="edit-name-detail">

            <h5 data-lang-key="modal_recommended_avatars">Recommended Avatars:</h5>
             <div class="recommended-avatars-list" id="recommended-avatars-list-detail">
                 <!-- Recommended avatars will be loaded here -->
             </div>

            <div class="modal-actions">
                <button class="cancel-btn" id="cancel-profile-edit-detail" data-lang-key="modal_cancel">Cancel</button>
                <button class="save-btn" id="save-profile-edit-detail" data-lang-key="modal_save">Save</button>
            </div>
        </div>
    </div>
    <!-- End Profile Edit Modal -->


    <!-- Language Data -->
    <script id="lang-data-detail" type="application/json">
        {
            "en": {
                "detail_page_title": "Flix.id - Movie Detail",
                "back_button_title": "Back to previous page",
                "rating_title": "Your Rating",
                "rate_this_label": "Rate this:",
                "trailers_title": "Trailers & More",
                "comments_title": "Comments",
                "comment_placeholder": "Add a comment...",
                "post_comment_btn": "Post Comment",
                "no_comments": "No comments yet.",
                "reply_button": "Reply",
                "replying_to": "Replying to {user}...",
                "play_trailer_button": "Play Trailer",
                "details_unavailable": "Details unavailable.",
                "no_trailers_available": "No trailers available.",
                "alert_empty_comment": "Please enter a comment.",
                "add_to_interesting": "Add to Interesting",
                "remove_from_interesting": "Remove from Interesting",
                "modal_edit_profile_title": "Edit Profile",
                "modal_nickname_label": "Nickname:",
                "modal_upload_avatar": "Upload New Avatar",
                "modal_recommended_avatars": "Recommended Avatars:",
                "modal_cancel": "Cancel",
                "modal_save": "Save",
                "alert_enter_profile_info": "Please enter both nickname and select/upload an avatar.",
                "alert_select_image_file": "Please select a valid image file.",
                 "notifications_title": "Notifications",
                 "no_notifications": "No new notifications",
                 "profile_link": "Profile",
                 "edit_profile_btn": "Edit Profile",
                 "settings_link": "Settings",
                 "help_link": "Help Center",
                 "logout_btn": "Logout",
                 "alert_profile_updated": "Your profile has been updated!",
                 "modal_select_avatar": "Select Avatar"
            },
            "ru": {
                "detail_page_title": "Flix.id - –î–µ—Ç–∞–ª–∏ –§–∏–ª—å–º–∞",
                "back_button_title": "–ù–∞–∑–∞–¥ –Ω–∞ –ø—Ä–µ–¥—ã–¥—É—â—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É",
                "rating_title": "–í–∞—à –†–µ–π—Ç–∏–Ω–≥",
                "rate_this_label": "–û—Ü–µ–Ω–∏—Ç—å:",
                "trailers_title": "–¢—Ä–µ–π–ª–µ—Ä—ã –∏ –î—Ä—É–≥–æ–µ",
                "comments_title": "–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏",
                "comment_placeholder": "–î–æ–±–∞–≤–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π...",
                "post_comment_btn": "–û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å",
                "no_comments": "–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ –ø–æ–∫–∞ –Ω–µ—Ç.",
                "reply_button": "–û—Ç–≤–µ—Ç–∏—Ç—å",
                "replying_to": "–û—Ç–≤–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é {user}...",
                "play_trailer_button": "–°–º–æ—Ç—Ä–µ—Ç—å –¢—Ä–µ–π–ª–µ—Ä",
                 "details_unavailable": "–î–µ—Ç–∞–ª–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã.",
                "no_trailers_available": "–¢—Ä–µ–π–ª–µ—Ä–æ–≤ –Ω–µ—Ç.",
                 "alert_empty_comment": "–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π.",
                 "add_to_interesting": "–î–æ–±–∞–≤–∏—Ç—å –≤ –ò–Ω—Ç–µ—Ä–µ—Å–Ω—ã–µ",
                 "remove_from_interesting": "–£–¥–∞–ª–∏—Ç—å –∏–∑ –ò–Ω—Ç–µ—Ä–µ—Å–Ω—ã—Ö",
                 "modal_edit_profile_title": "–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ü—Ä–æ—Ñ–∏–ª—å",
                 "modal_nickname_label": "–ù–∏–∫–Ω–µ–π–º:",
                 "modal_upload_avatar": "–ó–∞–≥—Ä—É–∑–∏—Ç—å –ê–≤–∞—Ç–∞—Ä",
                 "modal_recommended_avatars": "–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –ê–≤–∞—Ç–∞—Ä—ã:",
                 "modal_cancel": "–û—Ç–º–µ–Ω–∞",
                 "modal_save": "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å",
                 "alert_enter_profile_info": "–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –Ω–∏–∫–Ω–µ–π–º –∏ –≤—ã–±–µ—Ä–∏—Ç–µ/–∑–∞–≥—Ä—É–∑–∏—Ç–µ –∞–≤–∞—Ç–∞—Ä.",
                 "alert_select_image_file": "–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–π —Ñ–∞–π–ª –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è.",
                 "notifications_title": "–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è",
                 "no_notifications": "–ù–µ—Ç –Ω–æ–≤—ã—Ö —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π",
                 "profile_link": "–ü—Ä–æ—Ñ–∏–ª—å",
                 "edit_profile_btn": "–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ü—Ä–æ—Ñ–∏–ª—å",
                 "settings_link": "–ù–∞—Å—Ç—Ä–æ–π–∫–∏",
                 "help_link": "–°–ø—Ä–∞–≤–∫–∞",
                 "logout_btn": "–í—ã—Ö–æ–¥",
                 "alert_profile_updated": "–í–∞—à –ø—Ä–æ—Ñ–∏–ª—å –æ–±–Ω–æ–≤–ª–µ–Ω!",
                 "modal_select_avatar": "–í—ã–±—Ä–∞—Ç—å –ê–≤–∞—Ç–∞—Ä"
            },
            "kk": {
                "detail_page_title": "Flix.id - –§–∏–ª—å–º –î–µ—Ç–∞–ª—ñ",
                "back_button_title": "–ê–ª–¥—ã“£“ì—ã –±–µ—Ç–∫–µ –æ—Ä–∞–ª—É",
                "rating_title": "–°—ñ–∑–¥—ñ“£ –†–µ–π—Ç–∏–Ω–≥—ñ“£—ñ–∑",
                "rate_this_label": "–ë–∞“ì–∞–ª–∞“£—ã–∑:",
                "trailers_title": "–¢—Ä–µ–π–ª–µ—Ä–ª–µ—Ä –∂”ô–Ω–µ –±–∞—Å“õ–∞–ª–∞—Ä",
                "comments_title": "–ü—ñ–∫—ñ—Ä–ª–µ—Ä",
                "comment_placeholder": "–ü—ñ–∫—ñ—Ä “õ–æ—Å—É...",
                "post_comment_btn": "–ü—ñ–∫—ñ—Ä –∂–∞—Ä–∏—è–ª–∞—É",
                "no_comments": "”ò–ª—ñ –ø—ñ–∫—ñ—Ä–ª–µ—Ä –∂–æ“õ.",
                "reply_button": "–ñ–∞—É–∞–ø –±–µ—Ä—É",
                "replying_to": "{user} –ø–∞–π–¥–∞–ª–∞–Ω—É—à—ã“ì–∞ –∂–∞—É–∞–ø –±–µ—Ä—É...",
                "play_trailer_button": "–¢—Ä–µ–π–ª–µ—Ä –æ–π–Ω–∞—Ç—É",
                 "details_unavailable": "–ú”ô–ª—ñ–º–µ—Ç—Ç–µ—Ä –∂–æ“õ.",
                "no_trailers_available": "–¢—Ä–µ–π–ª–µ—Ä–ª–µ—Ä –∂–æ“õ.",
                 "alert_empty_comment": "–ü—ñ–∫—ñ—Ä –µ–Ω–≥—ñ–∑—ñ“£—ñ–∑.",
                 "add_to_interesting": "“ö—ã–∑—ã“õ—Ç—ã“ì–∞ “õ–æ—Å—É",
                 "remove_from_interesting": "“ö—ã–∑—ã“õ—Ç—ã–¥–∞–Ω –∂–æ—é",
                 "modal_edit_profile_title": "–ü—Ä–æ—Ñ–∏–ª—å–¥—ñ ”®“£–¥–µ—É",
                 "modal_nickname_label": "–õ–∞“õ–∞–ø –∞—Ç:",
                 "modal_upload_avatar": "–ñ–∞“£–∞ –ê–≤–∞—Ç–∞—Ä –ñ“Ø–∫—Ç–µ—É",
                 "modal_recommended_avatars": "“∞—Å—ã–Ω—ã–ª–∞—Ç—ã–Ω –ê–≤–∞—Ç–∞—Ä–ª–∞—Ä:",
                 "modal_cancel": "–ë–∞—Å —Ç–∞—Ä—Ç—É",
                 "modal_save": "–°–∞“õ—Ç–∞—É",
                 "alert_enter_profile_info": "–õ–∞“õ–∞–ø –∞—Ç—Ç—ã –µ–Ω–≥—ñ–∑—ñ“£—ñ–∑ –∂”ô–Ω–µ –∞–≤–∞—Ç–∞—Ä–¥—ã —Ç–∞“£–¥–∞“£—ã–∑/–∂“Ø–∫—Ç–µ“£—ñ–∑.",
                 "alert_select_image_file": "–î“±—Ä—ã—Å —Å—É—Ä–µ—Ç —Ñ–∞–π–ª—ã–Ω —Ç–∞“£–¥–∞“£—ã–∑.",
                 "notifications_title": "–•–∞–±–∞—Ä–ª–∞–Ω–¥—ã—Ä—É–ª–∞—Ä",
                 "no_notifications": "–ñ–∞“£–∞ —Ö–∞–±–∞—Ä–ª–∞–Ω–¥—ã—Ä—É–ª–∞—Ä –∂–æ“õ",
                 "profile_link": "–ü—Ä–æ—Ñ–∏–ª—å",
                 "edit_profile_btn": "–ü—Ä–æ—Ñ–∏–ª—å–¥—ñ ”®“£–¥–µ—É",
                 "settings_link": "–ü–∞—Ä–∞–º–µ—Ç—Ä–ª–µ—Ä",
                 "help_link": "–ê–Ω—ã“õ—Ç–∞–º–∞",
                 "logout_btn": "–®—ã“ì—É",
                 "alert_profile_updated": "–°—ñ–∑–¥—ñ“£ –ø—Ä–æ—Ñ–∏–ª—ñ“£—ñ–∑ –∂–∞“£–∞—Ä—Ç—ã–ª–¥—ã!",
                 "modal_select_avatar": "–ê–≤–∞—Ç–∞—Ä–¥—ã —Ç–∞“£–¥–∞—É"
            }
        }
    </script>

    <!-- Link to shared helpers and data -->
    <script src="shared.js"></script>
    <script src="data.js"></script>
    <!-- Link to external JS file for detail page -->
    <script src="movie_detail.js"></script>
</body>
</html>